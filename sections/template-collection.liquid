<link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />
<script src="{{ 'carousels.js' | asset_url }}" defer></script>
<link rel="stylesheet" href="{{ 'carousels.css' | asset_url }}" />

<div class="px-4 py-8">
  {% comment %} <a href="{{ routes.collections_url }}" class="text-base text-gray-500 hover:underline text-center block my-4">Go back to collections</a> {% endcomment %}
  
  
  {% paginate collection.products by section.settings.number_of_products_per_page %}

    <div class="containercustomright mb-24 lg:mb-36">

      <h1 class="text-grey font-heading font-huge font-bold font-huge uppercase text-6xl mb-12">{{ collection.title }}</h1>
  
      <div class="stretchright flex flex-col items-center my-8">
    
        <div class="swiper swiper-featured-products">
          <div class="swiper-wrapper max-w-[100vw]">
              {% for product in collection.products limit: section.settings.number_of_products_to_show %}
                {% assign shown_colors = '' %}
                {% for variant in product.variants %}
                    {% assign current_color = variant.options[0] %}
                    {% unless shown_colors contains current_color %}
                        <div class="swiper-slide">
                            {% render 'product-card', 
                                product_product: product,
                                current_variant: variant,
                                current_color: current_color,
                                include_colour: true %}
                        </div>
                        {% assign shown_colors = shown_colors | append: current_color | append: ',' %}
                    {% endunless %}
                {% endfor %}
            {% endfor %}
          </div>

          <div class="swiper-featured-products-scrollbar"></div>

        </div>
      
      </div>
    
    </div>
  
    {% render 'pagination', pagination: paginate %}

  {% endpaginate %}

</div>

{% schema %}
  {
    "name": "Template Collection",
    "settings": [
      {
        "type": "number",
        "id": "number_of_products_per_page",
        "default": 6,
        "label": "Number of products per page"
      }
    ]
  }
{% endschema %}